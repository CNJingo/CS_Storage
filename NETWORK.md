# JAVA

### 브라우저에 naver.com 를 입력하면 일어나는 일
<details>
   <summary> 자세히 보기 </summary>
 
 <br>

PC쪽에서 브라우저에 naver.com 를 입력하면

운영체제 수준에 따라 다른데 윈도우 기준으로는 도메인 이름을 기준으로 통신을 하려면 IP주소를 알아야한다.

그래서 1차적으로 DNS에 질의를 해야한다.

DNS를 hirachy한 구조를 가지고 있다. 분산형 DB구조이다.

하지만 DNS에 먼저 물어보기전에 컴퓨터마다 호스트파일이라는걸 가지고 있다.

그다음은 DNS Cache에 질의를 해서 캐시에 있을 경우 DNS에 질의하지 않는다.

DNS cache에도 없다면 DNS질의를 시작한다.

네트워크 설정에 따라서 DNS에 질의한다.

공유기가 DNS 포워딩 기능이 있어서 공유기가 DNS에 물어봐서 답을 컴퓨터에 전달해주는 구조도 있다.

또는 DNS에 직접 질의를 할 수도 있다.

그럼 IP주소를 획득하게 된다.

그다음 TCP연결을 한다. http 통신을 위해서

TCP연결이 성공한다면 이제 그다음 http request가 나간다.

하지만 조금 규모가 있는 회사는 무조건 GSLB를 타게 돼있다.

GSLB를 구현하는 방법이 여러가지가 있는데 그중에서 CDN서비스가 있다.

CDN은 PC에서 접속할떄 접속자의 IP를 판단하여 접속자의 위치를 판단한다.

그리고 사용자의 위치를 기반으로 어떤 서버로 접근할떄 가장 빠른지 판단한다. 이때 health check도 진행한다. 그리고 살아 있는 서버이면서 사용자에게 가장 가까운 서버에게 연결시켜주는 것이다.

그렇기 때문에 IP는 달라질 수 있다 왜냐? 내가 접속을 시도할때 가장 원활한 서버쪽으로 접근하기 때문이다.

    
</details>
