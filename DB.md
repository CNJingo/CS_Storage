# DB


### DB는 데이터를 어떻게 저장해놓을까
<details>
   <summary> 자세히 보기 </summary>
 
 <br>

우리가 DB에서 데이터를 조회하면 테이블 구조의 형태의 데이터를 만나게 될 것이다. 하지만 결국 이 또한 table에 대한 메타데이터와 로우데이터가 만나서 논리적으로 우리에게 테이블이라는 형태로 데이터가 보여지는 것이다.



mysql에서  `SHOW VARIABLES LIKE 'datadir';` 이라는 명령어를 치면 메타데이터와 데이터가 존재하는 파일의 위치를 알 수 있다. 여기서 확장자명이 .frm인 것은 테이블의 포맷을 담고 있고 확장자 명이 .ibd인 것은 테이블의 데이터들을 담고 있다.



DB는 기본적으로 트리형태로 데이터를 관리하고 있다. 일반적으로 B tree라는 것으로 데이터를 관리하고 있다. 

<img width="1963" alt="스크린샷 2022-06-27 오전 1 03 39" src="https://user-images.githubusercontent.com/55564829/175823167-acd8aeaf-196b-4553-9448-b8efd39b4dfc.png">


리프노드를 데이터 페이지라고 부르는데 이 데이터 페이지들이 실질적인 디비의 데이터들을 담고 있다. B tree는 clustered 인덱스로 구성되어 있으며 클러스터링 인덱스로 구성되어 있다는 것은 즉 데이터가 순차적으로 저장되어 있다는 것이다. 



이러한 구조에서는 데이터를 찾아가는 과정에 있어서 full table scan이 필요 없이 바로 원하는 데이터 페이지를 찾아갈 수 있다는 장점이 있다. 즉 엄청나게 느린 작업인 disk I/O를 줄여서 데이터를 찾는 작업을 최적화 시킨 것이다.

</details>


